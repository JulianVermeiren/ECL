(function(){function e(e){function t(e,t){let n=e.slice(2,e.length);return n.unshift(t),n}function n(e){let t="| TEAM_2 ";for(let n in p[0])e.includes(p[0][n])&&(t="| TEAM_1 ");return t}c=e.split("\n").map(e=>e.split(": ")),i=c.findIndex(e=>e[1].includes("[FACEIT^] LIVE!")),r=c.slice(0,i),a=c.slice(i,c.length);const f=(e,t)=>e.reduce((e,n,i)=>n[1].includes(t)?[...e,i]:e,[]),x=e=>e[0].includes("<STEAM_1")&&(e[0].includes("<TERRORIST>")||e[0].includes("<CT>"))?e:x(t(e,e[0].concat(e[1]))),h=e=>x(String(e).split(/\"(.*?)\"/g).filter(e=>String(e).trim())),g=e=>String(e).split(/\<(.*?)\>/g).filter(e=>String(e).trim());p=a.slice(0,f(a,"switched from team <CT> to <TERRORIST>")[0]<f(a,"switched from team <TERRORIST> to <CT>")[0]?f(a,"switched from team <CT> to <TERRORIST>")[0]:f(a,"switched from team <TERRORIST> to <CT>")[0]),p=p.filter(e=>e[1].includes("<STEAM_1")&&!e[1].includes("<Spectator>")&&!e[1].includes("<BOT>")&&!e[1].includes("<Unassigned>")&&(e[1].includes("<TERRORIST>")||e[1].includes("<CT>"))&&void 0!==h(e[1])[1]),p=p.filter(e=>!h(e[1])[1].includes("say")),p=p.map(e=>[e[0],e[1].replace("<"+g(h(e[1])[0])[1]+">","")]),p=p.map(e=>h(e[1])[0]),p=[...new Set(p.filter(e=>String(e).trim()))];const R=e=>{const t=e.filter(e=>"<"+g(h(e))[2]+">"=="<CT>"),n=e.filter(e=>"<"+g(h(e))[2]+">"=="<TERRORIST>");return[t,n]};p=R(p),p=p.map(e=>e.map(e=>e.replace(e.substring(e.indexOf("<"),e.lastIndexOf(">")+1),"")));let b=0,O=f(a,'"Round_End"');for(let e=0;e<O.length;e++)d.push(a.slice(b,O[e])),b=O[e],E.push(a[O[e]+1][1].replace("[FACEIT^] ","")),O.length-1==e&&(o=a.slice(O[e],a.length));d.forEach(e=>s.push(e.filter(e=>!!e[1].includes("say")))),d.forEach(e=>T.push(e.filter(e=>{e[1].split(" attacked ")[0];let t=e[1].split(" attacked ")[1];return void 0!==t&&!!(e[1].split(" attacked ")[0].includes("<CT>")&&e[1].split(" attacked ")[1].includes("<CT>")||e[1].split(" attacked ")[0].includes("<TERRORIST>")&&e[1].split(" attacked ")[1].includes("<TERRORIST>"))}))),m=o.filter(e=>e[1].includes("say")),u=r.filter(e=>e[1].includes("say")),s=s.map(e=>e.map(e=>[e[0],e[1].replace(e[1].slice(h(e[1])[0].indexOf("<")+1,h(e[1])[0].lastIndexOf(">")+2),""),e[1].includes("<CT>")?"CT":"TERRORIST"])),m=m.map(e=>[e[0],e[1].replace(e[1].slice(h(e[1])[0].indexOf("<")+1,h(e[1])[0].lastIndexOf(">")+2),""),e[1].includes("<CT>")?"CT":"TERRORIST"]),u=u.map(e=>[e[0],e[1].replace(e[1].slice(h(e[1])[0].indexOf("<")+1,h(e[1])[0].lastIndexOf(">")+2),""),e[1].includes("<CT>")?"CT":"TERRORIST"]);let A=document.createElement("div"),C=document.createElement("div");C.innerText="PREGAME\n";let y=document.createElement("div"),S=document.createElement("div");S.innerText="POSTGAME\n";const v=(...e)=>e.forEach(e=>e.setAttribute("class","divECL")),k=(e,t)=>e.setAttribute("style",`display:inline;background-color:${"CT"===t?"royalblue":"indianred"};margin-left: 10px;`),I=e=>e.setAttribute("class","time");document.open(),document.write(`<h1>${s.length} ROUNDS FOUND</h1>`),v(C,y,S,A),document.body.append(A,C,y,S),l=new Map,p.forEach(e=>e.forEach(e=>l[`${e}`]=c.filter(t=>t[1].includes("say")&&t[1].includes(e)).map(e=>[e[0],e[1].replace(e[1].slice(h(e[1])[0].indexOf("<")+1,h(e[1])[0].lastIndexOf(">")+2),"")]))),p.forEach((e,t)=>{let n=document.createElement("ul");n.innerText=`TEAM_${t+1}`,e.forEach(e=>{let t=document.createElement("li"),i=0;T.forEach(t=>t.forEach(t=>{t[1].split(" attacked ")[0].includes(e)&&i++})),t.innerText=e+"   || "+l[`${e}`].length+" messages || "+i+" TEAMDAMAGES",t.setAttribute("class","liCursor"),t.onclick=function(){let e=document.createElement("div");window.onclick=function(t){t.target==e&&e.remove()};let n=document.createElement("span");n.setAttribute("class","close"),n.onclick=function(){e.remove()},n.innerText="X";let i=document.createElement("div");if(i.setAttribute("class","modalContent"),e.append(i),i.append(n),e.setAttribute("class","modalECL"),l[`${t.innerText.split("||")[0].trim()}`].length>0)l[`${t.innerText.split("||")[0].trim()}`].forEach(e=>{let t=document.createElement("p");t.innerHTML=e[1]+"\n",t.setAttribute("style","display:inline;");let n=document.createElement("br");i.append(t,n)});else{let e=document.createElement("p");e.innerText="NOTHING TO SEE #EMPTY",i.append(e)}T.forEach(e=>e.forEach(e=>{if(e[1].split(" attacked ")[0].includes(t.innerText.split("||")[0].trim())){let t=document.createElement("br"),n=document.createElement("div");n.classList.add("divider"),i.append(t);let l=document.createElement("p");l.innerHTML=e[1]+"\n",l.setAttribute("style","display:inline;color:RED;"),i.append(l,n)}})),document.body.append(e)},n.append(t)}),A.append(n)}),u.forEach(e=>{let t=document.createElement("p");t.innerText=e[0],I(t);let n=document.createElement("p");n.innerText=e[1],k(n,e[2]),C.append(t,n)}),s.forEach((e,t)=>{let i=document.createElement("div");if(i.innerText="ROUND "+(t+1)+" || "+E[t]+"\n",i.setAttribute("class","divChatPerRound"),e.forEach(e=>{let t=document.createElement("p");t.innerText=e[0],I(t);let l=document.createElement("p"),c=document.createElement("p");c.innerText=n(e[1]),I(c),l.innerText=e[1]+"\n",k(l,e[2]),i.append(t,c,l)}),0!=T[t]){let e=document.createElement("div");e.innerText="\nTEAMDAMAGE DETECTED\n",T[t].forEach(t=>{let n=document.createElement("p");n.innerText=t[0]+" ",I(n);let i=document.createElement("p");e.setAttribute("class","teamDamageDiv"),i.setAttribute("class","teamDamageText"),i.innerText=t[1],e.append(n,i)}),i.append(e)}y.append(i)}),m.forEach(e=>{let t=document.createElement("p");t.innerText=e[0],I(t);let n=document.createElement("p");n.innerText=e[1],k(n,e[2]),S.append(t,n)})}function t(){let e="body{\n            font-family: system-ui;\n            font-size: 19px;\n        }\n        \n        .close {\n            color: #aaaaaa;\n            float: right;\n            font-size: 28px;\n            font-weight: bold;\n        }\n        \n        .close:hover,\n        .close:focus {\n            color: #000;\n            text-decoration: none;\n            cursor: pointer;\n        }\n        \n        .time {\n            -webkit-touch-callout: none;\n            -webkit-user-select: none;\n            -khtml-user-select: none;\n            -moz-user-select: none;\n            -ms-user-select: none;\n            user-select: none;\n            display: inline;\n            background-color: yellow;\n        }\n        \n        .divECL {\n            margin: 10px;\n            border: black solid;\n            padding: 10px;\n        }\n        \n        .modalContent {\n            background-color: #fefefe;\n            margin: auto;\n            padding: 20px;\n            border: 1px solid #888;\n            width: 80%;\n        }\n        \n        .modalECL {\n            position: fixed;\n            z-index: 1;\n            padding-top: 100px;\n            padding-bottom: 100px;\n            left: 0;\n            top: 0;\n            bottom:0;\n            width: 100%;\n            overflow: auto;\n            background-color: rgb(0, 0, 0);\n            background-color: rgba(0, 0, 0, 0.4);\n        }\n        \n        .divChatPerRound {\n            margin: 10px;\n            padding: 10px;\n        }\n        \n        .liCursor {\n            width: max-content;\n            cursor: crosshair;\n        }\n        \n        .teamDamageDiv {\n            display: inline;\n            background-color: GREEN;\n            margin-left: 10px;\n        }\n        \n        .teamDamageText {\n            display: inline;\n            background-color: GREEN;\n            margin-left: 10px;\n        }\n        \n        .divider{\n            border-top: 6px solid red;\n            width:100%;\n        }";var t=document.createElement("style");t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),document.getElementsByTagName("head")[0].appendChild(t)}let n=document.createElement("input");n.setAttribute("type","file"),n.setAttribute("accept","text/plain"),n.click(),n.addEventListener("input",n=>{let i=new FileReader;i.onload=function(){try{e(i.result),t()}catch(e){document.open(),document.write("<h1>WOOPS SOMETHING WENT WRONG</h1>");let t=document.createElement("div");t.innerText=e.name+"\n"+e.message+"\n"+e.stack,t.setAttribute("style","    position: relative;padding: 1rem 1rem;margin-bottom: 1rem;border: 1px solid transparent;border-radius: .25rem;color: #842029;background-color: #f8d7da;border-color: #f5c2c7;"),document.body.append(t)}},i.readAsText(n.target.files[0])});let i,l,c=[],r=[],a=[],d=[],o=[],s=[],m=[],u=[],p=[],E=[],T=[]})();